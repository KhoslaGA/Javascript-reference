<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Callbacks and Error Handling</title>
</head>

<body>
    Hello World
    <script>
        //  Sycnhronous programming example
        // let a = prompt("What is your name?")
        // let b = prompt("What is your age ?")
        // let c = prompt("What is your favourite Color ?")
        // console.log(a + " is " + b + " years old and has " + c +
        //     " favourite color ")

        // Asynchronous programming example
        // console.log("Start")
        // setTimeout(function () {
        //     console.log("Hey i am good");
        // }, 3000)
        // console.log("End");


        //Callbacks
        function loadScript(src, callback) {
            var script = document.createElement("script");
            script.src = src;
            script.onload = function () {
                console.log("Loaded script with SRC: " + src)
                callback(null, src);
            }
            script.onerror = function () {
                console.log("Error loading script with SRC: " + src);
                callback(new Error("Src got some error"))
            }
            document.body.appendChild(script);
        }

        function hello(error, src) {
            if (error) {
                console.log(error)
                return
            }
            alert('Hello World!' + src);
        }


        function goodmorning(error, src) {

            if (error) {
                console.log(error)
                // Method being used
                sendEmergencyMessageToCeo();
                return
            }
            alert('Good morning ' + src);
        }

        // Inversion of control can happen with using callbacks therefore we use promises

        //Example of pyramid of doom(lot of callbacks)
        loadScript("https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js", function goodmorning(
            error,
            src) {

            if (error) {
                console.log(error)
                // Method being used
                sendEmergencyMessageToCeo();
                return
            }
            loadScript("https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js",
                function goodmorning(
                    error,
                    src) {

                    if (error) {
                        console.log(error)
                        // Method being used
                        sendEmergencyMessageToCeo();
                        return
                    }
                    loadScript(
                        "https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js",
                        function goodmorning(
                            error,
                            src) {

                            if (error) {
                                console.log(error)
                                // Method being used
                                sendEmergencyMessageToCeo();
                                return
                            }
                            loadScript(
                                "https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js",
                                function goodmorning(
                                    error,
                                    src) {

                                    if (error) {
                                        console.log(error)
                                        // Method being used
                                        sendEmergencyMessageToCeo();
                                        return
                                    }
                                    loadScript(
                                        "https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js",
                                        function goodmorning(
                                            error,
                                            src) {

                                            if (error) {
                                                console.log(error)
                                                // Method being used
                                                sendEmergencyMessageToCeo();
                                                return
                                            }
                                            loadScript(
                                                "https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js",
                                                function goodmorning(
                                                    error,
                                                    src) {

                                                    if (error) {
                                                        console.log(error)
                                                        // Method being used
                                                        sendEmergencyMessageToCeo();
                                                        return
                                                    }
                                                    loadScript(
                                                        "https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js",
                                                        function goodmorning(
                                                            error,
                                                            src) {

                                                            if (error) {
                                                                console.log(error)
                                                                // Method being used
                                                                sendEmergencyMessageToCeo
                                                                    ();
                                                                return
                                                            }

                                                        })
                                                })
                                        })
                                })
                        })
                })
        })
    </script>
</body>

</html>